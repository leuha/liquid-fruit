# **Git学习记录**
## **资料来源[https://git-scm.com/book/zh/v2](https://git-scm.com/book/zh/v2)**#
# 第1章 Git介绍
### 1.1 版本控制系统——用于记录历史文件和更新文件
- **本地版本控制系统：用本地简单的数据库存储不同时期数据。**
- **集中化版本控制系统（CVCS）：服务器存储管理各个客户端的数据，缺点是服务器故障会导致更新和历史版本丢失，只剩各个客户端单独保存的数据。**
- **分布式版本控制系统（DVCS）：各客户端能从服务器克隆各时期所有数据，如服务器出故障，可从客户端导入，提高数据安全性。**

### 1.2 git特点
#### 设计简单、快速、完全分布式、支持大规模项目、支持非线性开发（大量并发开发）
### 1.3 Git工作介绍
#### 1.3.1 工作方式
##### 以SHA1哈希码的方式记录改动文件的内容和结构，文件没改动就只保留指向该文件的链接。其他版本控制系统则是记录按时间变化的文件，相比之下不使用差异化记录方式而依据时间变化保存文件快照的git更高效。
##### 此外，git几乎只面向本地文件进行操作，可以查看本地上的旧版本文件，没有网络连接也可以提交，有网络时即可上传，而其他版本控制系统做不到。
#### 1.3.2 工作状态
- **已提交：将文件保存到本地数据库。**
- **已修改：对本地数据库上的文件进行了修改，还没有保存到本地数据库。**
- **已暂存：对修改了的文件做了标记，作为下次提交的内容。**

#### 1.3.3 工作区域
- **git仓库:服务器保存元和对象数据库的数据存储区域。** 
- **暂存区域：用于保存下次提交修改文件的列表信息文件。**
- **工作目录：从git repository克隆数据进来的本地磁盘。**

#### 1.3.4工作流程
##### **在工作目录修改文件->存放到暂存区域->保存到git仓库。**
### 1.4 Git分支（本质上是指向提交对象的指针）
#### 1.4.1 Git对象
- **三个blob对象。保存文件快照。**
- **树对象。保存目录结构和blob对象索引。**
- **提交对象。保存指向树对象的指针和提交信息。**

### 1.5 分支操作
#### 整合不同分支修改：合并和变基。
- **合并:能保留历史版本快照，将最终结果合并于一起。**
- **变基:将提交依据次序应用在另一分支中，能清除修改历史。**
- **注意事项：在仓库外有副本的分支执行变基可能会导致大问题。用变基来解决变基带来的问题。**

---

# 第2章 Git基础（常用命令）
## 配置git、获取git仓库、更新git仓库等常用命令
### $ git config --global user.name ——配置全局用户名，不带global可取消全局信息显示。在提交操作前需要配置用户名、邮件名等信息。
### $ git config --list ——列出上一行等配置信息。
### $ git < verb > --help / git help < verb >  ——查询< verb >命令，如git help config为查询config命令。
### $ git init ——在新的工作目录初始化git仓库，生成子目录文件.git（包含git仓库中必须有的文件）。
### $ git clone 网络协议 ——从git仓库克隆数据到本地磁盘，网络协议后可加[自定义本地仓库名]？？？？？？，远程仓库默认名为“origin”，克隆仓库默认分支master会自动跟踪远程仓库默认分支master。
### $ touch .gitignore ——创建.gitignore文件，用于保存无用文件的类型信息，保证这些类型的文件不被提交。
### $ git status ——查看文件修改或暂存等状态。
    当要提交文件之前先使用该命令来确保修改的文件已被暂存。
### $ git add 文件名 ——跟踪一个文件并将其暂存。
    使用场景：
    a、新建了一个文件，需要使用该命令跟踪它，才能进行其他git操作。
    b、修改文件后，需要使用该命令，保证能提交最新修改过的文件，因为commit只会提交最后一次运行该命令暂存的文件。除非使用跳过暂存提交命令：$ git commit -a。
### $ git diff ——显示修改后未暂存文件和修改前文件之间的变化信息。
### $ git diff --staged/cached ——查看已暂存文件的变化。
### $ git commit ——提交暂存后的文件，可在commit后添加-m，后接字符串，意味着附加提交信息。
### $ git commit -a ——跳过暂存步骤，直接将所有跟踪过的文件进行暂存并提交。
### $ git rm 文件名 ——移除文件，顺带将工作目录中的文件删除。
### $ git rm 文件名 
    在工作目录中手动删除文件后，还需要使用该命令让文件移除暂存区而不再被跟踪。
### $ git rm --cached 文件名 ——文件保留在本地磁盘，同时在git系统中不再被跟踪。
### $ git mv 文件名1 文件名2 ——修改文件名字由文件名1变为文件名2。
### $ git commit --amend ——补充提交。
    在提交后而忘记暂存修改文件的时候使用，再次提交替代上一次提交。需要先执行$ git add 文件，再执行该命令。
### $ git reset HEAD 文件名 ——撤销对文件的暂存操作，即置为未暂存状态。
### $ git checkout -- 文件名 ——撤销对文件的修改操作，包括所有修改。只能在暂存之前生效。
### $ git remote add [远程仓库简写名] [URL] ——添加关联远程仓库。
    ？？？？
### $ git fetch [URL] ——获取远程仓库中所有分支的引用，不会合并和修改当前文件。
### $ git pull ——当本地当前分支跟踪远程仓库分支后，拉取远程仓库被跟踪的分支并自动尝试合并到当前分支。相当于执行$ git fetch后，紧接着执行$ git merge。
### $ git push [remote-name] [local-branchname]:[remote-name] ——将分支推送到远程仓库的[remote-name]分支。如果不带:[remote-name]，则在服务器创建[local-branchname]分支，origin/branchname分支将指向当前快照。
### $ git remote rename [远程仓库原名] [远程仓库改后名] ——为远程仓库改名。
### $ git remote rm [远程仓库简写名] ——移除远程仓库。
    详细说明
### $ git tag [tag-name] ——为分支打上轻量标签。
### $ git tag -a [tag-name] -m 'tag-message' ——为分支打上附注标签。
### $ git tag -a [tag-name] [（部分）校验和] ——后期为提交过的版本打标签。需先由$ git log命令查看（部分）校验和。
### $ git tag origin [标签名]/--tags ——与远程共享指定标签/所有标签。
    ？？？？
### $ git config --global alias.[别名] [git命令名] ——设置git命令别名。如果设置外部命令的别名，则在外部命令名前加上!。
### $ git log --oneline --decorate ——查看各个分支指向的提交对象。
### $ git branch [分支名] ——创建新分支：创建指针指向当前所在的提交对象。此时当前工作分支还是最后一次提交的分支。
### $ git checkout [分支名] ——将HEAD指向[分支名]分支，即切换了当前工作分支为[分支名]分支。 
### $ git checkout -b [分支名] ——创建[分支名]分支并切换到该分支。相当于上两步操作的简写。
### $ git merge [分支名] ——将当前工作分支与[分支名]分支合并。合并场景：
- **a、fast forward（快进）:如果当前分支往右（前）移动能找到需要合并的分支，则指针直接右移到需要合并的分支。**
- **b、如果a情况不成立。两个合并的分支有共同的提交对象的祖先，会新建一个快照指向当前提交对象和另一个被合并的对象，然后进行合并。**
- **c、如果一个文件的同一处被不同分支修改，合并会产生冲突，用$ git status 命令查看因包含冲突而未合并的文件，再统一手动修改。**

### $ git branch ——查看所有分支。
### $ git branch -v ——查看所有分支的最后一次提交。
### $ git branch -vv ——查看每个分支正在跟踪哪个远程分支。想要查看最新的信息，需要先执行$ git fetch --all。
### $ git branch -d [分支名] ——删除分支。用于做好修改且已被合并的场合。可用$ git --merged命令查看哪些分支已被合并（前面不带*的分支）。对于未被合并的分支，使用删除分支命令会失败，可用-D替换-d来强制删除。
### $ git ls-remote ——获得远程引用的完整列表。
### $ git remote show ——获得远程分支的信息。
### $ git fetch origin ——从服务器中抓取本地没有的数据。且移动origin/master指针指向更新后的位置。
### $ git checkout -b [分支名1] [origin/分支名] ——创建本地[分支名1]分支跟踪远程仓库上[分支名]分支，此时head指向该[分支名1]分支。
    最后一句有疑问
### $ git branch -u/--set-upstream-to [origin/分支名] ——设置本地已有分支跟踪远程分支或上游分支。
### $ git checkout track [origin/分支名] ——与上一条命令功能一样。
### $ git push origin --delete [远程分支名] ——删除远程分支。但容易恢复。
### $ git rebase --onto [分支名] [分支名1] [分支名2] ——将[分支名1]分支和[分支名2]分支的共同祖先分支之后[分支名2]分支修改的部分应用至[分支名]分支后。
### $ git rebase [分支名] ——将[分支名]分支和当前分支进行变基操作。
    变基：将两个分支[分支名]和[分支名1]整合起来。
    1.先将[分支名1]分支变基到[分支名]分支后：$ git checkout [分支名1];$ git rebase [分支名]。
    2.切换当前分支到[分支名]分支，然后合并两个分支：$ git checkout [分支名];$ git merge [分支名1]。
### $ git rebase [分支名1] [分支名2] ——将[分支名2]分支变基到[分支名1]分支上。效果等同于上一条指令集。
    有疑问
### $ git pull --rebase ——将从远程仓库拉取到本地的快照变基，防止清掉合作者的历史快照。或者先$ git fetch，再$ git rebase [origin/分支名]。（以变基解决变基可能带来的问题。）
 
